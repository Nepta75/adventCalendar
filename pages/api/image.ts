import type { NextApiRequest, NextApiResponse } from 'next'

const imageByDay = {
    1: "https://uc075f86e9f349dfb419ece97c10.previews.dropboxusercontent.com/p/thumb/ABsXyGWhjQ_UXc3BajlC27OGER9CCgByirFgVE3VnmRUotrT2ZngewMldEFLR7D3_nZ1IqnSm4yhxZNHpk4wRFbIDv_ImDVc9IDDQX2moWck71DOCGlAU51Mu35HXEV7NqjsJWJ-zjQ-TnGqZDU3qCW6VjCOqmg_Cg0US5u8mSaSEAhjJHWbqkdgDA0cN7Jnp0KbQK3TISCtcQ7lCnwO17mrm8Fnd3g11_TylYcStbjbR5D5gSwbvtR_BzeLKpd3SKLdGjPy1vTtD_wKe8rUwWLVojDbg-mDnh6IFZG2dg5Av6EivPoQ54maEsXLtuxVm9kP5EjE9bzQldHHN5O7-7ZDKikeHzd2VkiwTy757HPIBNbN55VhHimnGEK3rnW1gruvG49vb-NlkBMCDxGy5rkvYvmf12QFO2eqi51EoqHM0A/p.png",
    2: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    3: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    4: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    5: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    6: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    7: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    8: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    9: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    10: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    11: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    12: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    13: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    14: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    15: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    16: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    17: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    18: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    19: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    20: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    21: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    22: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    23: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
    24: "https://previews.dropbox.com/p/thumb/ABuLeLJf0DpyNc7zpjV4nkLrI3lER4uOp-H8P7xprpit93lUdSdFpscxYPLodHsxF7o5AG6djz_IRhiJdvqY414pOr1TQGd1rj98HMhs5yKK9Tih7gvTWXiTezXEj2xy5ld_QSGN55_pge-j4ozEEpWNDbx0YvgjQCDMO5qYDDExpSwXQ4EflzYNAITZLX_jKc6T1FtWnEBlw4xg0GE_XxFIk0DP1lRx1m0K3gQXqPPd2Ez4xj6O0OsMXSOwaS1aFtlzhxoOFgupaL1bBvOlrxz10o8ayG5-7q9QeJPwy-59GPSZIVkQsE_SWkRx58WCsVGg9uCTni30oNkTRDsgtI6Fhd37A3X19YVDbdkOy3w37IpRh3Md-3jeL3LK6JKR-AI/p.jpeg",
}

const messages = [
    'Le jour n\'est pas encore arrivé ! Mets la clim BG',
    'Le jour n\'est pas encore arrivé ! Toujours pas frérot',
    'Le jour n\'est pas encore arrivé ! Pas la gol',
];


type Data = {
  url?: string
  error?: string
}

export default function handler(
  req: NextApiRequest,
  res: NextApiResponse<Data>
) {
    const { day } = req.query
    if (!day) return res.status(400).json({ error: 'Jour manquant !'})

    const currentDay = new Date();
    const date = new Date(currentDay.getFullYear(), 10 - 1, Number(day));

    if (currentDay.getMonth() === (10 - 1) && currentDay.getTime() >= date.getTime()) {
        //@ts-ignore
        res.status(200).json({ url: imageByDay[Number(day)] })
    } else {
        const randomMessage = Math.floor(Math.random() * messages.length);
        res.status(401).json({ error: messages[randomMessage] })
    }
}
